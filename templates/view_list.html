<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ list.name }} - {{ list.warehouse }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <h1>List: {{ list.name }}</h1>
    <p>Warehouse: {{ list.warehouse }}</p>
    <p>Date: {{ list.timestamp.strftime('%d.%m.%Y %H:%M') }}</p>
    <p>Total Scooters: {{ scans|length }}</p>
    <div id="button-container">
        <button onclick="window.location.href='/lists'">Return</button>
        <button onclick="exportList()">Export to .xlsx</button>
        <button onclick="deleteList()">Delete List</button>
    </div>
    <ul id="scooter-list">
        {% for scan in scans %}
        <li>{{ scan.scooter_id }} - {{ scan.timestamp.strftime('%H:%M | %d.%m.%Y') }}</li>
        {% else %}
        <li>No scooters scanned.</li>
        {% endfor %}
    </ul>

    <script>
        function exportList() {
            window.location.href = '/export/{{ list.id }}';
        }
        function deleteList() {
            if (confirm('Are you sure you want to delete this list? This action cannot be undone.')) {
                fetch('/delete_list/{{ list.id }}', { method: 'POST' })
                .then(response => {
                    if (response.ok) {
                        window.location.href = '/lists';
                    } else {
                        alert('Error deleting list.');
                    }
                });
            }
        }
    </script>
</body>
</html>
